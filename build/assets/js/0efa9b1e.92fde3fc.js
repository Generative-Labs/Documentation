(self.webpackChunkchat_service_api_doc=self.webpackChunkchat_service_api_doc||[]).push([[1056],{9951:function(e,t,n){"use strict";n.d(t,{A:function(){return k}});var a=n(7294),s=n(1262),o=n(4184),i=n.n(o),r="code-lineout_cZQd",l="code-box-demo_X7Ez",c="code-box-meta_GVCM",m="code-box-title_sfQs",d="code-box-description_bhuL",p="code-box-actions_vDQF",u="code-box-show-code_Yemp",g="code-icon_AL8q",h="code-icon-hide_dxEg",v="highlight-wrapper_JnmS",f="highlight-wrapper-hide_pcAC",k=function(e){var t=e.title,n=e.description,o=e.code,k=e.children,C=(0,a.useState)(!0),M=C[0],N=C[1];return a.createElement(s.Z,null,(function(){var e,s,C;return a.createElement("div",{className:r},a.createElement("div",{className:l},k),a.createElement("div",{className:c},a.createElement("div",{className:m},t),a.createElement("div",{className:d},n),o&&a.createElement("div",{className:p},a.createElement("span",{className:u},a.createElement("img",{className:i()(g,(e={},e[h]=M,e)),onClick:function(){return N(!M)},src:"https://gw.alipayobjects.com/zos/antfincdn/Z5c7kzvi30/expand.svg",alt:""}),a.createElement("img",{className:i()(g,(s={},s[h]=!M,s)),onClick:function(){return N(!M)},src:"https://gw.alipayobjects.com/zos/antfincdn/4zAaozCvUH/unexpand.svg",alt:""})))),o&&a.createElement("div",{className:i()(v,(C={},C[f]=!M,C))},o))}))}},1086:function(e,t,n){"use strict";var a=n(5861),s=n(7757),o=n.n(s),i=n(7294),r=n(1352);t.Z=function(){var e=(0,i.useMemo)((function(){var e=localStorage.getItem("PRIVATE_KEY")||"",t=localStorage.getItem("PUBLIC_KEY")||"",n=localStorage.getItem("userid")||"";return e&&t&&n?{PrivateKey:e,PublicKey:t,userid:n}:null}),[]),t=(0,i.useState)(e),n=t[0],s=t[1],l=(0,i.useState)(null),c=l[0],m=l[1],d=function(){var e=(0,a.Z)(o().mark((function e(){var t,n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("PUBLIC_KEY")||"",n=localStorage.getItem("DID_KEY")||"",e.next=4,r.Client.init({connectUrl:localStorage.getItem("FAST_URL"),app_key:"vAUJTFXbBZRkEDRE",env:"dev",didKey:n,tempPubkey:t});case 4:a=e.sent,localStorage.setItem("FAST_URL",a),m(a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{keys:n,fastestUrl:c,init:d,logout:function(){localStorage.setItem("PRIVATE_KEY",""),localStorage.setItem("PUBLIC_KEY",""),localStorage.setItem("DID_KEY",""),localStorage.setItem("userid",""),s(null)},handleLoginEvent:function(e){if(e.data){if("login"===e.type){var t=e.data,n=t.privateKey,a=t.publicKey,o=t.tempPrivateKey,i=t.tempPublicKey,r=t.didKey,l=t.userid,c=t.address,m=t.pubkeyExpiredTimestamp;localStorage.setItem("userid",l),localStorage.setItem("PRIVATE_KEY",o),localStorage.setItem("PUBLIC_KEY",i),localStorage.setItem("WALLET_ADDRESS",c),localStorage.setItem("MAIN_PRIVATE_KEY",n),localStorage.setItem("MAIN_PUBLIC_KEY",a),localStorage.setItem("DID_KEY",r),localStorage.setItem("PUBKEY_EXPIRED_TIMESTAMP",String(m)),s({PrivateKey:o,PublicKey:i,userid:l})}if("register"===e.type){var d=e.data,p=d.privateKey,u=d.publicKey,g=d.address;localStorage.setItem("WALLET_ADDRESS",g),localStorage.setItem("MAIN_PRIVATE_KEY",p),localStorage.setItem("MAIN_PUBLIC_KEY",u)}}}}}},2770:function(e,t,n){"use strict";n.r(t),n.d(t,{assets:function(){return b},contentTitle:function(){return M},default:function(){return I},frontMatter:function(){return C},metadata:function(){return N},toc:function(){return y}});var a=n(7462),s=n(3366),o=n(7294),i=n(3905),r=n(9951),l=n(1352),c=n(4137),m=n(1086),d="dataInner_oxC2",p="name_bTey",u=function(e){var t=e.message;return o.createElement("div",{style:{display:"flex",alignItems:"flex-start",padding:"16px 24px",borderBottom:"1px solid #f2f2f2",position:"relative"}},o.createElement(c.qE,{name:"user",image:(null==t?void 0:t.avatar)||"",size:30}),o.createElement("div",{style:{position:"relative",width:"100%"}},o.createElement("div",{className:d},o.createElement("span",{className:p},function(e){void 0===e&&(e="");var t=e.length;return e.substring(0,5)+"..."+e.substring(t-4,t)}(t.senderId)),o.createElement("span",null,t.date,"\xa0",t.timestamp)),o.createElement("div",null,t.content)))},g=function(){var e=(0,m.Z)(),t=e.keys,n=e.init,a=e.fastestUrl,s=e.logout;if((0,o.useEffect)((function(){n()}),[]),!t)return o.createElement(c.zx,{size:"large",type:"ghost"},o.createElement("a",{href:"/docs/Web3MQ-UI-Components/Web3MQ-React/chatComponent/LoginModal#basic-usage",style:{textDecoration:"none"}},"Please login first"));if(!a)return null;var i=l.Client.getInstance(t);return o.createElement("div",{id:"box",style:{position:"relative",border:"1px solid #f2f2f2",width:"100%",height:"500px",overflow:"auto"}},o.createElement(c.en,{containerId:"box",client:i,appType:c.KU.h5,logout:s},o.createElement("div",{style:{height:"100%",display:"flex",flexDirection:"column"}},o.createElement(c.GO,null)),o.createElement(c.$W,null,o.createElement(c.Rz,{hasContainer:!0},o.createElement(c.Ng,null),o.createElement(c.rN,{Message:u}),o.createElement(c.Ru,null)))))},h=["components"],v={toc:[]};function f(e){var t=e.components,n=(0,s.Z)(e,h);return(0,i.kt)("wrapper",(0,a.Z)({},v,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx"},"import React, { useEffect, PropsWithChildren } from 'react';\nimport { Client } from '@web3mq/client';\nimport { \n  AppTypeEnum, \n  Avatar,\n  Chat, \n  ChannelList, \n  Channel, \n  Button,\n  LoginModal,\n  MessageList, \n  MessageHeader, \n  MessageInput,\n  MessageProps, \n  Window\n} from '@web3mq/react-components';\n\nimport useLogin from './hooks/useLogin';\n\nconst CustomMessage = (props: PropsWithChildren<MessageProps>) => {\n  const { message } = props;\n  const getShortAddress = (address: string = '') => {\n    let strLength = address.length;\n    return address.substring(0, 5) + '...' + address.substring(strLength - 4, strLength);\n  };\n  return (\n    <div style={{ display: 'flex', alignItems: 'flex-start', padding: '16px 24px', borderBottom: '1px solid #f2f2f2', position: 'relative'}}>\n      <Avatar\n        name=\"user\"\n        image={message?.avatar || ''}\n        size={30} \n      />\n      <div style={{position: 'relative', width: '100%'}}>\n        <div>\n          <span>{getShortAddress(message.senderId)}</span>\n          <span>{message.date}&nbsp;{message.timestamp}</span>\n        </div>\n        <div>{message.content}</div>\n      </div>\n    </div>\n  )\n}\n\nexport const MessageListExample: React.FC = () => {\n const { keys, fastestUrl, init, logout, handleLoginEvent } = useLogin();\n\n  useEffect(() => {\n    init();\n    document.body.setAttribute('data-theme', 'light');\n  }, [])\n\n  if (!keys) {\n    return (\n       <LoginModal \n        appType={AppTypeEnum.pc}\n        handleLoginEvent={handleLoginEvent}\n        loginBtnNode={<Button size='large' type='ghost'>login</Button>}\n      />\n    );\n  }\n  if (!fastestUrl) {\n    return null;\n  }\n\n  const client = Client.getInstance(keys);\n\n  return (\n    <div id='box' style={{position: 'relative'}}>\n      <Chat containerId='box' client={client} appType={AppTypeEnum['h5']} logout={logout}>\n        <ChannelList />\n        <Channel>\n          <Window hasContainer>\n            <MessageHeader />\n            <MessageList Message={CustomMessage} />\n            <MessageInput />\n          </Window>\n        </Channel>\n      </Chat>\n    </div>\n  );\n}; \n")))}f.isMDXComponent=!0;var k=["components"],C={sidebar_position:4},M="MessageList",N={unversionedId:"Web3MQ-UI-Components/Web3MQ-React/chatComponent/MessageList",id:"Web3MQ-UI-Components/Web3MQ-React/chatComponent/MessageList",title:"MessageList",description:"The MessageList component renders a scrollable list of messages. The UI for each individual message is rendered conditionally based on its message.type value. The list renders date separators, new message notifications, system messages, and standard messages containing text.",source:"@site/docs/Web3MQ-UI-Components/Web3MQ-React/chatComponent/MessageList.md",sourceDirName:"Web3MQ-UI-Components/Web3MQ-React/chatComponent",slug:"/Web3MQ-UI-Components/Web3MQ-React/chatComponent/MessageList",permalink:"/docs/Web3MQ-UI-Components/Web3MQ-React/chatComponent/MessageList",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Channel",permalink:"/docs/Web3MQ-UI-Components/Web3MQ-React/chatComponent/Channel"},next:{title:"MessageHead",permalink:"/docs/Web3MQ-UI-Components/Web3MQ-React/chatComponent/MessageHead"}},b={},y=[{value:"Basic Usage",id:"basic-usage",level:2},{value:"Api",id:"api",level:2}],E={toc:y};function I(e){var t=e.components,n=(0,s.Z)(e,k);return(0,i.kt)("wrapper",(0,a.Z)({},E,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"messagelist"},"MessageList"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"MessageList")," component renders a scrollable list of messages. The UI for each individual message is rendered conditionally based on its ",(0,i.kt)("inlineCode",{parentName:"p"},"message.type")," value. The list renders date separators, new message notifications, system messages, and standard messages containing text."),(0,i.kt)("p",null,"By default, the ",(0,i.kt)("inlineCode",{parentName:"p"},"MessageList")," loads the most recent 20 messages. More messages are fetched from the Chat API and loaded into the DOM on scrolling up the list. The currently loaded messages are held in the component state and can be referenced with our custom hook. "),(0,i.kt)("h2",{id:"basic-usage"},"Basic Usage"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"MessageList")," has no required props,  and as a context consumer, the ",(0,i.kt)("inlineCode",{parentName:"p"},"MessageList")," component must be rendered as a child of the ",(0,i.kt)("inlineCode",{parentName:"p"},"Channel")," component.You can customize the message content with ",(0,i.kt)("inlineCode",{parentName:"p"},"props")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"ComponentContext")," and override the default style"),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"If your channelList list is empty, you can create a chat room in ",(0,i.kt)("a",{parentName:"p",href:"/docs/Web3MQ-UI-Components/Web3MQ-React/chatComponent/CreateChannel"},"createChannel")," and select it to send messages."))),(0,i.kt)(r.A,{title:"Example",description:"This is the MessageList example",code:(0,i.kt)(f,{mdxType:"MessageListExampleMdx"}),mdxType:"Layout"},(0,i.kt)(g,{mdxType:"MessageListExample"})),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"To use a custom Message component:"),(0,i.kt)("blockquote",{parentName:"div"},(0,i.kt)("ol",{parentName:"blockquote"},(0,i.kt)("li",{parentName:"ol"},"Passed as the props to ",(0,i.kt)("inlineCode",{parentName:"li"},"Channel"),", in the custom ",(0,i.kt)("inlineCode",{parentName:"li"},"Message"),", you need to get the ",(0,i.kt)("inlineCode",{parentName:"li"},"message")," property through ",(0,i.kt)("inlineCode",{parentName:"li"},"useMessageContext"),"."),(0,i.kt)("li",{parentName:"ol"},"Passed as the props to ",(0,i.kt)("inlineCode",{parentName:"li"},"MessageList"),", you can get the ",(0,i.kt)("inlineCode",{parentName:"li"},"message")," property from props."))))),(0,i.kt)("h2",{id:"api"},"Api"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"The properties of the Channel are described as follows:")),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Property"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Default"),(0,i.kt)("th",{parentName:"tr",align:null},"required"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Message"),(0,i.kt)("td",{parentName:"tr",align:null},"set your custom ",(0,i.kt)("inlineCode",{parentName:"td"},"Message")," component"),(0,i.kt)("td",{parentName:"tr",align:null},"React.ComponentType"),(0,i.kt)("td",{parentName:"tr",align:null},"-"),(0,i.kt)("td",{parentName:"tr",align:null},"-")))))}I.isMDXComponent=!0},3094:function(){},6601:function(){},9214:function(){},5568:function(){}}]);